"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[9187],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),m=p(n),c=a,g=m["".concat(l,".").concat(c)]||m[c]||d[c]||s;return n?i.createElement(g,o(o({ref:t},u),{},{components:n})):i.createElement(g,o({ref:t},u))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=c;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[m]="string"==typeof e?e:a,o[1]=r;for(var p=2;p<s;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},49202:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));const s={title:"Email Authentication"},o="Email Authentication",r={unversionedId:"guides/email-auth",id:"guides/email-auth",title:"Email Authentication",description:"Overview",source:"@site/docs/guides/email-auth.md",sourceDirName:"guides",slug:"/guides/email-auth",permalink:"/docs/guides/email-auth",draft:!1,editUrl:"https://github.com/wasp-lang/wasp/edit/release/web/docs/guides/email-auth.md",tags:[],version:"current",frontMatter:{title:"Email Authentication"},sidebar:"docs",previous:{title:"Google",permalink:"/docs/integrations/google"},next:{title:"Username & Password",permalink:"/docs/guides/username-password"}},l={},p=[{value:"Overview",id:"overview",level:2},{value:"Outline of the guide",id:"outline-of-the-guide",level:2},{value:"Email authentication in <code>main.wasp</code>",id:"email-authentication-in-mainwasp",level:3},{value:"User entity",id:"user-entity",level:3},{value:"Routes and pages",id:"routes-and-pages",level:3},{value:"Email sender",id:"email-sender",level:3},{value:"Using Auth UI",id:"using-auth-ui",level:2},{value:"Signup page",id:"signup-page",level:3},{value:"Login page",id:"login-page",level:3},{value:"Email verification setup",id:"email-verification-setup",level:2},{value:"Email verification page",id:"email-verification-page",level:3},{value:"Password reset setup",id:"password-reset-setup",level:2},{value:"Request password reset page",id:"request-password-reset-page",level:3},{value:"Password reset page",id:"password-reset-page",level:3},{value:"Logout action",id:"logout-action",level:3},{value:"Getting the user in our client &amp; server code",id:"getting-the-user-in-our-client--server-code",level:3},{value:"Conclusion",id:"conclusion",level:2}],u={toc:p},m="wrapper";function d(e){let{components:t,...s}=e;return(0,a.kt)(m,(0,i.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"email-authentication"},"Email Authentication"),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,'Wasp supports e-mail authentication out of the box, along with email verification and "forgot your password?" flows. It provides a set of routes and email templates that you can use to implement it in your app.'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Auth UI",src:n(85566).Z,width:"1068",height:"464"})),(0,a.kt)("p",null,"In this guide, we'll go through the easiest way to set up email authentication: using Wasp's ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/auth-ui"},"Auth UI")," components. Check out the Auth UI guide for more details on how to customize the UI."),(0,a.kt)("h2",{id:"outline-of-the-guide"},"Outline of the guide"),(0,a.kt)("p",null,"We'll need to take the following steps to set up email authentication:"),(0,a.kt)("ul",{className:"contains-task-list"},(0,a.kt)("li",{parentName:"ul",className:"task-list-item"},(0,a.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Set up email authentication in ",(0,a.kt)("inlineCode",{parentName:"li"},"main.wasp")),(0,a.kt)("li",{parentName:"ul",className:"task-list-item"},(0,a.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Add the user entity"),(0,a.kt)("li",{parentName:"ul",className:"task-list-item"},(0,a.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Add the routes and pages"),(0,a.kt)("li",{parentName:"ul",className:"task-list-item"},(0,a.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Set up the email sender in ",(0,a.kt)("inlineCode",{parentName:"li"},"main.wasp")," and ",(0,a.kt)("inlineCode",{parentName:"li"},".env.server")),(0,a.kt)("li",{parentName:"ul",className:"task-list-item"},(0,a.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Use Auth UI components in our pages")),(0,a.kt)("p",null,"Outline of the Wasp file we'll be working with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},"// Configuring e-mail authentication\napp myApp { ... }\n\n// Defining User entity\nentity User { ... }\n\n// Defining routes and pages\nroute SignupRoute { ... }\npage SignupPage { ... }\n// ...\n")),(0,a.kt)("h3",{id:"email-authentication-in-mainwasp"},"Email authentication in ",(0,a.kt)("inlineCode",{parentName:"h3"},"main.wasp")),(0,a.kt)("p",null,"Let's first set up the email authentication by adding the following to our ",(0,a.kt)("inlineCode",{parentName:"p"},"main.wasp")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    // 1. Specify the user entity\n    userEntity: User,\n    methods: {\n      // 2. Enable email authentication\n      email: {\n        // 3. Specify the email from field\n        fromField: {\n          name: "My App Postman",\n          email: "hello@itsme.com"\n        },\n        // 4. Specify the email verification and password reset options\n        emailVerification: {\n          clientRoute: EmailVerificationRoute,\n          getEmailContentFn: import { getVerificationEmailContent } from "@server/auth/email.js",\n        },\n        passwordReset: {\n          clientRoute: PasswordResetRoute,\n          getEmailContentFn: import { getPasswordResetEmailContent } from "@server/auth/email.js",\n        },\n        allowUnverifiedLogin: false,\n      },\n    },\n    onAuthFailedRedirectTo: "/login",\n    onAuthSucceededRedirectTo: "/profile"\n  },\n}\n')),(0,a.kt)("h3",{id:"user-entity"},"User entity"),(0,a.kt)("p",null,"Then we'll define the ",(0,a.kt)("inlineCode",{parentName:"p"},"User")," entity in our ",(0,a.kt)("inlineCode",{parentName:"p"},"main.wasp")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp" {4-8}',title:'"main.wasp"',"{4-8}":!0},"// 5. Define the user entity\nentity User {=psl\n    id                        Int           @id @default(autoincrement())\n    email                     String?       @unique\n    password                  String?\n    isEmailVerified           Boolean       @default(false)\n    emailVerificationSentAt   DateTime?\n    passwordResetSentAt       DateTime?\n    // Add your own fields below\n    // ...\npsl=}\n")),(0,a.kt)("h3",{id:"routes-and-pages"},"Routes and pages"),(0,a.kt)("p",null,"Next, we need to define the routes and pages for the authentication pages. We'll show the React code later, but for now we'll just define the routes and pages."),(0,a.kt)("p",null,"We'll add the following to our ",(0,a.kt)("inlineCode",{parentName:"p"},"main.wasp")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'// 6. Define the routes\nroute SignupRoute { path: "/signup", to: SignupPage }\npage SignupPage {\n  component: import { Signup } from "@client/pages/auth/Signup.tsx"\n}\n\nroute LoginRoute { path: "/login", to: LoginPage }\npage LoginPage {\n  component: import { Login } from "@client/pages/auth/Login.tsx"\n}\n\nroute RequestPasswordResetRoute { path: "/request-password-reset", to: RequestPasswordResetPage }\npage RequestPasswordResetPage {\n  component: import { RequestPasswordReset } from "@client/pages/auth/RequestPasswordReset.tsx",\n}\n\nroute PasswordResetRoute { path: "/password-reset", to: PasswordResetPage }\npage PasswordResetPage {\n  component: import { PasswordReset } from "@client/pages/auth/PasswordReset.tsx",\n}\n\nroute EmailVerificationRoute { path: "/email-verification", to: EmailVerificationPage }\npage EmailVerificationPage {\n  component: import { EmailVerification } from "@client/pages/auth/EmailVerification.tsx",\n}\n')),(0,a.kt)("h3",{id:"email-sender"},"Email sender"),(0,a.kt)("p",null,"We'll use SendGrid in this guide to send our e-mails. You can use any of the supported email providers. Read more about setting up the email sender in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/sending-emails"},"email sender setup guide"),"."),(0,a.kt)("p",null,"To set up SendGrid to send emails, we will add the following to our ",(0,a.kt)("inlineCode",{parentName:"p"},"main.wasp")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},"app myApp {\n  ...\n  emailSender: {\n    provider: SendGrid,\n  }\n}\n")),(0,a.kt)("p",null,"... and add the following to our ",(0,a.kt)("inlineCode",{parentName:"p"},".env.server")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c",metastring:'title=".env.server"',title:'".env.server"'},"SENDGRID_API_KEY=<your key>\n")),(0,a.kt)("h2",{id:"using-auth-ui"},"Using Auth UI"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"We are using ",(0,a.kt)("a",{parentName:"p",href:"https://tailwindcss.com/"},"Tailwind CSS")," to style the page. Read more about how to add it ",(0,a.kt)("a",{parentName:"p",href:"/docs/integrations/css-frameworks#tailwind"},"here"),".")),(0,a.kt)("h3",{id:"signup-page"},"Signup page"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Auth UI",src:n(89189).Z,width:"1017",height:"435"})),(0,a.kt)("p",null,"We are using the ",(0,a.kt)("inlineCode",{parentName:"p"},"SignupForm")," component from ",(0,a.kt)("inlineCode",{parentName:"p"},"@wasp/auth/forms/Signup")," to render the signup form."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="client/pages/auth/Signup.tsx"',title:'"client/pages/auth/Signup.tsx"'},'import { Link } from \'react-router-dom\'\nimport { SignupForm } from \'@wasp/auth/forms/Signup\'\n\nexport function Signup () {\n  return (\n    <div className="w-full h-full bg-white">\n      <div className="min-w-full min-h-[75vh] flex items-center justify-center">\n        <div className="w-full h-full max-w-sm p-5 bg-white">\n          <div>\n            <SignupForm />\n            <br />\n            <span className="text-sm font-medium text-gray-900">\n              I already have an account (<Link to="/login">go to login</Link>).\n            </span>\n            <br />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n')),(0,a.kt)("h3",{id:"login-page"},"Login page"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Auth UI",src:n(71625).Z,width:"1068",height:"464"})),(0,a.kt)("p",null,"We are using the ",(0,a.kt)("inlineCode",{parentName:"p"},"LoginForm")," component from ",(0,a.kt)("inlineCode",{parentName:"p"},"@wasp/auth/forms/Login")," to render the login form."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="client/pages/auth/Login.tsx"',title:'"client/pages/auth/Login.tsx"'},'import { Link } from \'react-router-dom\'\nimport { LoginForm } from \'@wasp/auth/forms/Login\'\n\nexport function Login() {\n  return (\n    <div className="w-full h-full bg-white">\n      <div className="min-w-full min-h-[75vh] flex items-center justify-center">\n        <div className="w-full h-full max-w-sm p-5 bg-white">\n          <div>\n            <LoginForm />\n            <br />\n            <span className="text-sm font-medium text-gray-900">\n              Don\'t have an account yet? <Link to="/signup">go to signup</Link>.\n            </span>\n            <br />\n            <span className="text-sm font-medium text-gray-900">\n              Forgot your password?{\' \'}\n              <Link to="/request-password-reset">reset it</Link>.\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n')),(0,a.kt)("h2",{id:"email-verification-setup"},"Email verification setup"),(0,a.kt)("p",null,"By default, Wasp requires the e-mail to be verified before allowing the user to log in. This is done by sending a verification email to the user's email address and requiring the user to click on a link in the email to verify their email address."),(0,a.kt)("p",null,"Our setup looks like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'emailVerification: {\n    clientRoute: EmailVerificationRoute,\n    getEmailContentFn: import { getVerificationEmailContent } from "@server/auth/email.js",\n}\n')),(0,a.kt)("p",null,"When the user receives an e-mail, they receive a link that goes to the client route specified in the ",(0,a.kt)("inlineCode",{parentName:"p"},"clientRoute")," field. In our case, this is the ",(0,a.kt)("inlineCode",{parentName:"p"},"EmailVerificationRoute")," route we defined in the ",(0,a.kt)("inlineCode",{parentName:"p"},"main.wasp")," file."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'route EmailVerificationRoute { path: "/email-verification", to: EmailVerificationPage }\npage EmailVerificationPage {\n  component: import { EmailVerification } from "@client/pages/auth/EmailVerification.tsx",\n}\n')),(0,a.kt)("h3",{id:"email-verification-page"},"Email verification page"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Auth UI",src:n(86846).Z,width:"1036",height:"381"})),(0,a.kt)("p",null,"This route goes to the ",(0,a.kt)("inlineCode",{parentName:"p"},"EmailVerification")," page, which is defined in the ",(0,a.kt)("inlineCode",{parentName:"p"},"EmailVerification.tsx")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="client/pages/auth/EmailVerification.tsx"',title:'"client/pages/auth/EmailVerification.tsx"'},'import { Link } from \'react-router-dom\'\nimport { VerifyEmailForm } from \'@wasp/auth/forms/VerifyEmail\'\n\nexport function EmailVerification() {\n  return (\n    <div className="w-full h-full bg-white">\n      <div className="min-w-full min-h-[75vh] flex items-center justify-center">\n        <div className="w-full h-full max-w-sm p-5 bg-white">\n          <div>\n            <VerifyEmailForm />\n            <br />\n            <span className="text-sm font-medium text-gray-900">\n              If everything is okay, <Link to="/login">go to login</Link>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n')),(0,a.kt)("p",null,"You'll notice we are using the ",(0,a.kt)("inlineCode",{parentName:"p"},"VerifyEmailForm")," component from the ",(0,a.kt)("inlineCode",{parentName:"p"},"@wasp/auth/forms/VerifyEmail")," module. This will give a nice-looking form for the user to verify their e-mail."),(0,a.kt)("p",null,"We will also override the default e-mail content. We are using the ",(0,a.kt)("inlineCode",{parentName:"p"},"getVerificationEmailContent")," function from the ",(0,a.kt)("inlineCode",{parentName:"p"},"@server/auth/email.js")," file to generate the email content."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="server/auth/email.ts"',title:'"server/auth/email.ts"'},"import { GetVerificationEmailContentFn } from '@wasp/types'\n\nexport const getVerificationEmailContent: GetVerificationEmailContentFn = ({\n  verificationLink,\n}) => ({\n  subject: 'Verify your email',\n  text: `Click the link below to verify your email: ${verificationLink}`,\n  html: `\n        <p>Click the link below to verify your email</p>\n        <a href=\"${verificationLink}\">Verify email</a>\n    `,\n})\n")),(0,a.kt)("h2",{id:"password-reset-setup"},"Password reset setup"),(0,a.kt)("p",null,"Users can request a password and then they'll receive an e-mail with a link to reset their password. "),(0,a.kt)("p",null,"Our setup in ",(0,a.kt)("inlineCode",{parentName:"p"},"main.wasp")," looks like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'passwordReset: {\n    clientRoute: PasswordResetRoute,\n    getEmailContentFn: import { getPasswordResetEmailContent } from "@server/auth/email.js",\n}\n')),(0,a.kt)("h3",{id:"request-password-reset-page"},"Request password reset page"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Request password reset page",src:n(82109).Z,width:"1057",height:"407"})),(0,a.kt)("p",null,"They request their password to be reset by going to the ",(0,a.kt)("inlineCode",{parentName:"p"},"/request-password-reset")," page. We'll add a link to this page in the login page."),(0,a.kt)("p",null,"That page will look like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="client/pages/auth/RequestPasswordReset.tsx"',title:'"client/pages/auth/RequestPasswordReset.tsx"'},'import { ForgotPasswordForm } from \'@wasp/auth/forms/ForgotPassword\'\n\nexport function RequestPasswordReset() {\n  return (\n    <div className="w-full h-full bg-white">\n      <div className="min-w-full min-h-[75vh] flex items-center justify-center">\n        <div className="w-full h-full max-w-sm p-5 bg-white">\n          <div>\n            <ForgotPasswordForm />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n')),(0,a.kt)("p",null,"We will also override the default e-mail content that's sent. We are using the ",(0,a.kt)("inlineCode",{parentName:"p"},"getVerificationEmailContent")," function from the ",(0,a.kt)("inlineCode",{parentName:"p"},"@server/auth/email.js")," file to generate the email content."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="server/auth/email.ts"',title:'"server/auth/email.ts"'},"import { GetPasswordResetEmailContentFn } from '@wasp/types'\n\nexport const getPasswordResetEmailContent: GetPasswordResetEmailContentFn = ({\n  passwordResetLink,\n}) => ({\n  subject: 'Password reset',\n  text: `Click the link below to reset your password: ${passwordResetLink}`,\n  html: `\n        <p>Click the link below to reset your password</p>\n        <a href=\"${passwordResetLink}\">Reset password</a>\n    `,\n})\n")),(0,a.kt)("h3",{id:"password-reset-page"},"Password reset page"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Request password reset page",src:n(60513).Z,width:"1055",height:"510"})),(0,a.kt)("p",null,"When the user receives an e-mail, they receive a link that goes to the client route specified in the ",(0,a.kt)("inlineCode",{parentName:"p"},"clientRoute")," field. In our case, this is the ",(0,a.kt)("inlineCode",{parentName:"p"},"PasswordResetRoute")," route we defined in the ",(0,a.kt)("inlineCode",{parentName:"p"},"main.wasp")," file."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'route PasswordResetRoute { path: "/password-reset", to: PasswordResetPage }\npage PasswordResetPage {\n  component: import { PasswordReset } from "@client/pages/auth/PasswordReset.tsx",\n}\n')),(0,a.kt)("p",null,"This route goes to the ",(0,a.kt)("inlineCode",{parentName:"p"},"PasswordResetPage")," page, which is defined in the ",(0,a.kt)("inlineCode",{parentName:"p"},"PasswordReset.tsx")," file. Users can enter their new password here:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="client/pages/auth/PasswordReset.tsx"',title:'"client/pages/auth/PasswordReset.tsx"'},'import { Link } from \'react-router-dom\'\nimport { ResetPasswordForm } from \'@wasp/auth/forms/ResetPassword\'\n\nexport function PasswordReset() {\n  return (\n    <div className="w-full h-full bg-white">\n      <div className="min-w-full min-h-[75vh] flex items-center justify-center">\n        <div className="w-full h-full max-w-sm p-5 bg-white">\n          <div>\n            <ResetPasswordForm />\n            <br />\n            <span className="text-sm font-medium text-gray-900">\n              If everything is okay, <Link to="/login">go to login</Link>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n')),(0,a.kt)("h3",{id:"logout-action"},"Logout action"),(0,a.kt)("p",null,"To implement the logout action, you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"logout")," function from the ",(0,a.kt)("inlineCode",{parentName:"p"},"@wasp/auth/logout")," module. We can add it for example, to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Navbar")," component:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="client/components/Navbar.tsx"',title:'"client/components/Navbar.tsx"'},"import logout from '@wasp/auth/logout';\n\nexport function Navbar() {\n  return (\n    <div>\n      <button onClick={logout}>Logout</button>\n    </div>\n  )\n}\n")),(0,a.kt)("h3",{id:"getting-the-user-in-our-client--server-code"},"Getting the user in our client & server code"),(0,a.kt)("p",null,"You read about our ",(0,a.kt)("inlineCode",{parentName:"p"},"useAuth")," hook in ",(0,a.kt)("a",{parentName:"p",href:"/docs/language/features#accessing-the-currently-logged-in-user"},"this section")," of the docs."),(0,a.kt)("p",null,"In short, you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"useAuth")," hook in your client code to get the currently logged-in user. If there is no user logged in, it will return ",(0,a.kt)("inlineCode",{parentName:"p"},"null"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="client/pages/Profile.tsx"',title:'"client/pages/Profile.tsx"'},"import useAuth from '@wasp/auth'\n\nexport function Profile() {\n  const { data: user } = useAuth()\n\n  if (!user) {\n    return <div>You are not logged in!</div>\n  }\n\n  return (\n    <div>\n      Hello, {user.email}!\n    </div>\n  )\n}\n")),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"And that's it! We now have a full authentication system in our app. We can register new users, login, logout, verify their e-mail, and reset their password."),(0,a.kt)("p",null,"We hope you enjoyed this guide and that you learned something new. If you have any questions, feel free to ask them on ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/rzdnErX"},"our Discord server"),"."))}d.isMDXComponent=!0},85566:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/all_screens-4474bfaf188590d975e11d5b4e04b0ae.gif"},86846:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/email_verification-b1919c242edc678175636485f6fc2264.png"},82109:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/forgot_password_after-db85e082ff373ebb95f3bdf9e64c1918.png"},71625:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/login-1dad984cebbef0e4bd2bc0c008d2d2ff.png"},60513:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/reset_password_after-3eecfee765304fd41b6385519cc5e522.png"},89189:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/signup-4362e29083e15457eb5a16990f57819a.png"}}]);